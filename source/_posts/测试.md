---
title: 测试
date: 2021-07-30 09:40:59
tags:
---



# test

## as

测试

{%spoiler 示例代码%}

```mysql
mysql> begin;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from ttt where id=2 lock in share mode;
Empty set (0.00 sec)

mysql>
mysql> select * from performance_schema.data_locks;
+--------+-------------------------------------+-----------------------+-----------+----------+---------------+-------------+----------------+-------------------+------------+-----------------------+-----------+-----------+-------------+-----------+
| ENGINE | ENGINE_LOCK_ID                      | ENGINE_TRANSACTION_ID | THREAD_ID | EVENT_ID | OBJECT_SCHEMA | OBJECT_NAME | PARTITION_NAME | SUBPARTITION_NAME | INDEX_NAME | OBJECT_INSTANCE_BEGIN | LOCK_TYPE | LOCK_MODE | LOCK_STATUS | LOCK_DATA |
+--------+-------------------------------------+-----------------------+-----------+----------+---------------+-------------+----------------+-------------------+------------+-----------------------+-----------+-----------+-------------+-----------+
| INNODB | 1665988586848:1381:1665951760584    |       283140965297504 |        53 |       35 | ttt           | ttt         | NULL           | NULL              | NULL       |         1665951760584 | TABLE     | IS        | GRANTED     | NULL      |
| INNODB | 1665988586848:324:4:3:1665951757800 |       283140965297504 |        53 |       35 | ttt           | ttt         | NULL           | NULL              | PRIMARY    |         1665951757800 | RECORD    | S,GAP     | GRANTED     | 5         |
+--------+-------------------------------------+-----------------------+-----------+----------+---------------+-------------+----------------+-------------------+------------+-----------------------+-----------+-----------+-------------+-----------+
2 rows in set (0.00 sec)

mysql> begin;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from ttt where id=2 lock in share mode;
Empty set (0.00 sec)

mysql> select * from performance_schema.data_locks\G
*************************** 1. row ***************************
               ENGINE: INNODB
       ENGINE_LOCK_ID: 1665988586848:1381:1665951760584
ENGINE_TRANSACTION_ID: 283140965297504
            THREAD_ID: 53
             EVENT_ID: 39
        OBJECT_SCHEMA: ttt
          OBJECT_NAME: ttt
       PARTITION_NAME: NULL
    SUBPARTITION_NAME: NULL
           INDEX_NAME: NULL
OBJECT_INSTANCE_BEGIN: 1665951760584
            LOCK_TYPE: TABLE
            LOCK_MODE: IS
          LOCK_STATUS: GRANTED
            LOCK_DATA: NULL
*************************** 2. row ***************************
               ENGINE: INNODB
       ENGINE_LOCK_ID: 1665988586848:324:4:3:1665951757800
ENGINE_TRANSACTION_ID: 283140965297504
            THREAD_ID: 53
             EVENT_ID: 39
        OBJECT_SCHEMA: ttt
          OBJECT_NAME: ttt
       PARTITION_NAME: NULL
    SUBPARTITION_NAME: NULL
           INDEX_NAME: PRIMARY
OBJECT_INSTANCE_BEGIN: 1665951757800
            LOCK_TYPE: RECORD
            LOCK_MODE: S,GAP
          LOCK_STATUS: GRANTED
            LOCK_DATA: 5
2 rows in set (0.00 sec)

mysql>
```

{% endspoiler %}

![image-20210808192837824](https://raw.githubusercontent.com/Abug0/Typora-Pics/master/pics/Typora20210808192837.png)

# 33
